{% extends "user/userlayout.html"%}
{% block content %}

<div class="hero-wrap position-relative" style="background-image: url(static/user/images/balii.jpg); background-size: cover; background-position: center; height: 75vh; padding-bottom: 80px;">
    <!-- Overlay -->
    <div class="position-absolute top-0 start-0 w-100 h-100" style="background-color: rgba(0,0,0,0.5); z-index: 1;"></div>

    <!-- Hero Content -->
    <div class="container h-100 position-relative" style="z-index: 2;">
        <div class="row h-100 align-items-center justify-content-center text-center">
            <div class="col-md-8">
                <span class="subheading text-light fw-semibold" 
                      style="font-size: 35px; font-weight: 600; letter-spacing: 3px; font-family: Arial, Helvetica, sans-serif;">
                    Welcome to TripNest
                </span><br>
                <h1 class="mb-4 text-white fw-bold display-4" 
                    style="text-shadow: 2px 2px 8px rgba(0,0,0,0.6); line-height: 1.2; font-family:'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; font-size: 55px;">
                    Explore the World, One Journey at a Time
                </h1>
                <p class="text-light fs-5 mx-auto" 
                   style="max-width: 680px; margin-top: 1rem; text-shadow: 1px 1px 5px rgba(0,0,0,0.6); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.5;">
                    Discover breathtaking destinations and unforgettable experiences. Start your adventure with TripNest today!
                </p>
                <div class="mt-4">
                    <a href="{{ url_for('usercategory') }}" 
                       class="btn btn-primary btn-lg px-5 rounded-pill shadow" 
                       style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-weight: 600;">
                        Start Your Journey
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Search Box: relative positioning, hero section ke andar -->
    <div style="width: 70%; max-width: 500px; margin: 0 auto; position: relative; z-index: 2; margin-top: -20px;">
        <form action="{{ url_for('search') }}" method="post" class="bg-white rounded shadow p-3" style="position: relative;" onsubmit="return validateSearch()">
            <div class="d-flex align-items-center">
                <input type="text" name="search" id="search" class="form-control me-3" placeholder="Search place" autocomplete="off"
                    style="flex: 1; min-height: 42px; font-size: 15px; border-radius: 0.375rem; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
                <input type="submit" value="Search" class="btn btn-primary px-4"
                    style="min-height: 42px; font-size: 15px; border-radius: 0.375rem; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-weight: 600;">
            </div>
            <div id="suggestions" style="position: absolute; top: 100%; left: 0; right: 0; background: white; color: black; border: 1px solid #ccc; display: none; z-index: 1100;"></div>
        </form>
    </div>
</div>

<script>
  function validateSearch() {
    const searchInput = document.getElementById('search').value.trim();
    if (searchInput === '') {
      alert('Please enter a destination to search');
      return false; // form submit roko
    }
    return true; // form submit karo
  }
</script>

    <section class="ftco-section services-section">
        <div class="container">
            <div class="row d-flex">
                <div class="col-md-6 order-md-last heading-section pl-md-5 ftco-animate d-flex align-items-center">
                    <div class="w-100">
                        <h2 class="mb-4">Why Choose TripNest</h2>
                        <p>At TripNest, we don’t just offer trips – we create unforgettable travel experiences. 
                        Our mission is to make every journey stress-free, affordable, and filled with memories that last a lifetime. Whether you are looking for an adventure escape, a romantic honeymoon, a cultural exploration, or a peaceful holiday, we have handpicked packages designed for every kind of traveler.</p>
                        <p>With TripNest, you don’t need to worry about planning, bookings, or last-minute hassles. From flights and hotels to activities and guides, our team manages everything for you. We combine local expertise with modern travel solutions to ensure your trip is smooth, safe, and enjoyable. All you need to do is pack your bags and get ready for your next adventure!</p>
                        <p>Join thousands of happy travelers who have explored the world with TripNest. From breathtaking landscapes to hidden local gems, we ensure every journey is unique and memorable. With our expert guidance and personalized support, your dream vacation is just a booking away. Adventure, relaxation, and discovery await—let’s make your next trip extraordinary!</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-12 col-lg-6 d-flex align-self-stretch ftco-animate">
                            <div class="services services-1 color-1 d-block img" style="background-image: url(static/user/images/services-1.jpg);">
                                <div class="icon d-flex align-items-center justify-content-center"><span class="flaticon-paragliding"></span></div>
                                <div class="media-body">
                                    <h3 class="heading mb-3">Best Price Guarantee</h3>
                                    <p>Enjoy the most competitive prices with no hidden charges—value for every penny you spend.</p>
                                </div>
                            </div>      
                        </div>
                        <div class="col-md-12 col-lg-6 d-flex align-self-stretch ftco-animate">
                            <div class="services services-1 color-2 d-block img" style="background-image: url(static/user/images/services-2.jpg);">
                                <div class="icon d-flex align-items-center justify-content-center"><span class="flaticon-route"></span></div>
                                <div class="media-body">
                                    <h3 class="heading mb-3">Customizable Trips</h3>
                                    <p>Design your perfect journey. Add activities, change destinations, and make your trip truly yours.</p>
                                </div>
                            </div>    
                        </div>
                        <div class="col-md-12 col-lg-6 d-flex align-self-stretch ftco-animate">
                            <div class="services services-1 color-3 d-block img" style="background-image: url(static/user/images/services-3.jpg);">
                                <div class="icon d-flex align-items-center justify-content-center"><span class="flaticon-tour-guide"></span></div>
                                <div class="media-body">
                                    <h3 class="heading mb-3">24/7 Travel Assistance</h3>
                                    <p>Our team is always just a call or message away, ready to help before, during, and after your trip.</p>
                                </div>
                            </div>      
                        </div>
                        <div class="col-md-12 col-lg-6 d-flex align-self-stretch ftco-animate">
                            <div class="services services-1 color-4 d-block img" style="background-image: url(static/user/images/services-4.jpg);">
                                <div class="icon d-flex align-items-center justify-content-center"><span class="flaticon-map"></span></div>
                                <div class="media-body">
                                    <h3 class="heading mb-3">Safe & Secure Booking</h3>
                                    <p>Book with confidence through trusted partners, verified guides, and secure payment options.</p>
                                </div>
                            </div>      
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="ftco-section img ftco-select-destination" style="background-image: url(static/user/images/bg_3.jpg);">
        <div class="container">
            <div class="row justify-content-center pb-4">
                <div class="col-md-12 heading-section text-center ftco-animate">
                    <h2 class="mb-4">Discover Tours by Category</h2>
                </div>
            </div>
        </div>
        <div class="container container-2">
            <div class="row">
                <div class="col-md-12">
                    <div class="carousel-destination owl-carousel ftco-animate">
                        {% for i in cate%}
                        <div class="item">
                            <div class="project-destination">
                                <a href="{{url_for('view_packages_by_category',category_id = i[0])}}" class="img" style="background-image: url({{i[2]}});">
                                    <div class="text">
                                        <h3>{{i[1]}}</h3>
                                    </div>
                                </a>
                            </div>
                        </div>
                        {% endfor %}                       
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="ftco-section">
        <div class="container">
            <div class="row justify-content-center pb-4">
                <div class="col-md-12 heading-section text-center ftco-animate">
                    <h2 class="mb-4">Explore Our Travel Packages</h2>
                </div>
            </div>
           
            <div class="row">
                {% for i in pack %}
                <div class="col-md-4 ftco-animate">
                    <div class="project-wrap">
                        <a href="{{url_for('packagedetails',id=i[0])}}" class="img" style="background-image: url({{i[5]}});">
                            <span class="price">{{i[4]}}</span>
                        </a>
                        <div class="text p-4">
                            <span class="days">{{i[3]}} Days Tour</span>
                            <h3><a href="#">{{i[1]}}</a></h3>
                            <p class="location"><span class="fa fa-map-marker"></span> {{i[2]}}</p>
                        
                        </div>
                    </div> 
                </div> {% endfor %}         
            </div>           
        </div>      
    </section>
       
    <section class="ftco-section ftco-about img"style="background-image: url(static/user/images/bg_4.jpg);">
        <div class="overlay"></div>
        <div class="container py-md-5">
            <div class="row py-md-5">
                <div class="col-md d-flex align-items-center justify-content-center">
                    <a href="https://vimeo.com/45830194" class="icon-video popup-vimeo d-flex align-items-center justify-content-center mb-4">
                        <span class="fa fa-play"></span>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <section class="ftco-section ftco-about ftco-no-pt img">
        <div class="container">
            <div class="row d-flex">
                <div class="col-md-12 about-intro">
                    <div class="row">
                        <div class="col-md-6 d-flex align-items-stretch">
                            <div class="img d-flex w-100 align-items-center justify-content-center" style="background-image:url(static/user/images/about-1.jpg);">
                            </div>
                        </div>
                        <div class="col-md-6 pl-md-5 py-5">
                            <div class="row justify-content-start pb-3">
                                <div class="col-md-12 heading-section ftco-animate">
                                    <h2 class="mb-4">Make Your Tour Memorable and Safe With Us</h2>
                                    <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean.</p>
                                  
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

   <section class="ftco-section testimony-section bg-bottom" style="background-image: url(static/user/images/bg_1.jpg);">
    <div class="overlay"></div>
    <div class="container">
        <div class="row justify-content-center pb-4">
            <div class="col-md-7 text-center heading-section heading-section-white ftco-animate">
                <span class="subheading">Testimonial</span>
                <h2 class="mb-4">Tourist Feedback</h2>
            </div>
        </div>
        <div class="row ftco-animate">
            <div class="col-md-12">
                <div class="carousel-testimony owl-carousel">
                    {% for j in feedback %}
                    <div class="item">
                        <div class="testimony-wrap py-4">
                            <div class="text">
                                <p class="mb-4" style="text-align: justify;">{{ j[4] }}</p>
                                <div class="d-flex align-items-center">

                                    {% if j[5] %}
                                    <div class="user-img" style="background-image: url({{ url_for('static', filename=j[5].replace('\\','/') ) }})"></div>
                                    {% else %}
                                    <div class="user-img" style="background-image: url({{ url_for('static', filename='user/images/default-user.png') }})"></div>
                                    {% endif %}

                                    <div class="pl-3">
                                        <p class="name">{{ j[1] }}</p>
                                        <span class="position">{{ j[6] }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</section>


<style>
    .carousel-testimony .item {
    display: flex;
    justify-content: center; /* centers the card */
}

.testimony-wrap {
    display: flex;
    flex-direction: column;
    height: 100%; /* fills the item height */
}

</style>
    <script>
document.getElementById('search').addEventListener('input', function () {
    const query = this.value.trim();
    const box = document.getElementById('suggestions');

    if (query.length < 1) {
        box.style.display = 'none';
        box.innerHTML = '';
        return;
    }

    fetch(`/suggest?term=${query}`)
        .then(res => res.json())
        .then(data => {
            box.innerHTML = '';
            if (data.length === 0) {
                box.style.display = 'none';
                return;
            }

            data.forEach(item => {
                let div = document.createElement('div');
                div.textContent = item;
                div.classList.add('list-group-item');
                div.style.cursor = 'pointer';
                div.onclick = () => {
                    document.getElementById('search').value = item;
                    box.innerHTML = '';
                    box.style.display = 'none';
                };
                box.appendChild(div);
            });
            box.style.display = 'block';
        });
});
</script>

<script>
window.addEventListener('load', function() {
    const cards = document.querySelectorAll('.carousel-testimony .testimony-wrap');
    let maxHeight = 0;

    // Find the tallest card
    cards.forEach(card => {
        if(card.offsetHeight > maxHeight) maxHeight = card.offsetHeight;
    });

    // Apply tallest height to all cards
    cards.forEach(card => {
        card.style.height = maxHeight + 'px';
    });
});
</script>




{% endblock %}